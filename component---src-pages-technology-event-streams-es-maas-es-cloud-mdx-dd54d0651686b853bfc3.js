(window.webpackJsonp=window.webpackJsonp||[]).push([[76,73,123],{"013z":function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),i=a("NmYn"),r=a.n(i),c=a("Wbzz"),s=a("Xrax"),l=a("k4MR"),b=a("TSYQ"),p=a.n(b),m=a("QH2O"),u=a.n(m),d=a("qKvR"),h=function(e){var t,a=e.title,n=e.theme,o=e.tabs,i=void 0===o?[]:o;return Object(d.b)("div",{className:p()(u.a.pageHeader,(t={},t[u.a.withTabs]=i.length,t[u.a.darkMode]="dark"===n,t))},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12"},Object(d.b)("h1",{id:"page-title",className:u.a.text},a)))))},g=a("BAC9"),O=function(e){var t=e.relativePagePath,a=e.repository,n=Object(c.useStaticQuery)("1364590287").site.siteMetadata.repository,o=a||n,i=o.baseUrl,r=o.subDirectory,s=i+"/edit/"+o.branch+r+"/src/pages"+t;return i?Object(d.b)("div",{className:"bx--row "+g.row},Object(d.b)("div",{className:"bx--col"},Object(d.b)("a",{className:g.link,href:s},"Edit this page on GitHub"))):null},j=a("FCXl"),f=a("dI71"),N=a("I8xM"),v=function(e){function t(){return e.apply(this,arguments)||this}return Object(f.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,o=n.split("/").filter(Boolean).slice(-1)[0],i=a.map((function(e){var t,a=r()(e,{lower:!0,strict:!0}),i=a===o,s=new RegExp(o+"/?(#.*)?$"),l=n.replace(s,a);return Object(d.b)("li",{key:e,className:p()((t={},t[N.selectedItem]=i,t),N.listItem)},Object(d.b)(c.Link,{className:N.link,to:""+l},e))}));return Object(d.b)("div",{className:N.tabsContainer},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(d.b)("nav",{"aria-label":t},Object(d.b)("ul",{className:N.list},i))))))},t}(o.a.Component),k=a("MjG9"),y=a("CzIb"),w=a("Asxa"),I=a("OIbQ"),C=a.n(I),x=function(e){var t=e.date,a=new Date(t);return t?Object(d.b)(w.c,{className:C.a.row},Object(d.b)(w.a,null,Object(d.b)("div",{className:C.a.text},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null};t.a=function(e){var t=e.pageContext,a=e.children,n=e.location,o=e.Title,i=t.frontmatter,b=void 0===i?{}:i,p=t.relativePagePath,m=t.titleType,u=b.tabs,g=b.title,f=b.theme,N=b.description,w=b.keywords,I=b.date,C=Object(y.a)().interiorTheme,T=Object(c.useStaticQuery)("2456312558").site.pathPrefix,S=T?n.pathname.replace(T,""):n.pathname,E=u?S.split("/").filter(Boolean).slice(-1)[0]||r()(u[0],{lower:!0}):"",L=f||C;return Object(d.b)(l.a,{tabs:u,homepage:!1,theme:L,pageTitle:g,pageDescription:N,pageKeywords:w,titleType:m},Object(d.b)(h,{title:o?Object(d.b)(o,null):g,label:"label",tabs:u,theme:L}),u&&Object(d.b)(v,{title:g,slug:S,tabs:u,currentTab:E}),Object(d.b)(k.a,{padded:!0},a,Object(d.b)(O,{relativePagePath:p}),Object(d.b)(x,{date:I})),Object(d.b)(j.a,{pageContext:t,location:n,slug:S,tabs:u,currentTab:E}),Object(d.b)(s.a,null))}},BAC9:function(e,t,a){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},GZ5B:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return c})),a.d(t,"default",(function(){return d}));var n=a("wx14"),o=a("zLVn"),i=(a("q1tI"),a("7ljp")),r=a("013z"),c=(a("qKvR"),{}),s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(i.b)("div",t)}},l=s("AnchorLinks"),b=s("AnchorLink"),p=s("InlineNotification"),m={_frontmatter:c},u=r.a;function d(e){var t=e.components,a=Object(o.a)(e,["components"]);return Object(i.b)(u,Object(n.a)({},m,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This documentation aims to be a introductory hands-on lab on IBM Event Streams on Cloud with topic creation."),Object(i.b)("h2",null,"Index"),Object(i.b)(l,{mdxType:"AnchorLinks"},Object(i.b)(b,{mdxType:"AnchorLink"},"Pre-requisites"),Object(i.b)(b,{mdxType:"AnchorLink"},"Create a Event Streams service instance"),Object(i.b)(b,{mdxType:"AnchorLink"},"Creating Event Streams instance with IBM Cloud CLI"),Object(i.b)(b,{mdxType:"AnchorLink"},"Create topic"),Object(i.b)(b,{mdxType:"AnchorLink"},"Create topic with CLI")),Object(i.b)("h2",null,"Pre-requisites"),Object(i.b)("p",null,"This lab requires the following components to work against:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"An IBM Cloud account. Get a IBM Cloud Account by using the register link in ",Object(i.b)("a",{parentName:"li",href:"https://cloud.ibm.com/login"},"https://cloud.ibm.com/login"),"\nCreate a new account is free of charge.")),Object(i.b)("img",{src:"./images/ic-login.png",alt:null}),Object(i.b)("p",null,"On your development workstation you will need:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"IBM Cloud CLI (",Object(i.b)("a",{parentName:"li",href:"https://cloud.ibm.com/docs/cli?topic=cloud-cli-getting-started"},"https://cloud.ibm.com/docs/cli?topic=cloud-cli-getting-started"),")"),Object(i.b)("li",{parentName:"ol"},"IBM CLoud CLI Event Streams plugin (",Object(i.b)("inlineCode",{parentName:"li"},"ibmcloud plugin install event-streams"),")")),Object(i.b)("h3",null,"Login CLI"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"ibmcoud login\n")),Object(i.b)("h3",null,"Account and resource group concepts"),Object(i.b)("p",null,"As any other IBM Cloud services, Event Streams can be part of a resources group, is controlled by user roles, and is accessible via API keys.\nTo get familiar with those concepts, it is recommended to study ",Object(i.b)("a",{parentName:"p",href:"https://cloud.ibm.com/docs/account?topic=account-overview"},"the concepts of IBM account"),"\nand how it is related to resource group and services. The following diagram is a summary of the objects managed in IBM Cloud:"),Object(i.b)("img",{src:"https://cloud.ibm.com/docs/api/content/account/images/account_diagram.svg",alt:null}),Object(i.b)("p",null,"To summarize:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Account represents the billable entity, and can have multiple users."),Object(i.b)("li",{parentName:"ul"},"Users are given access to resource groups."),Object(i.b)("li",{parentName:"ul"},"Applications are identified with a service ID."),Object(i.b)("li",{parentName:"ul"},"To restrict permissions for using specific services, you can assign specific access policies to the service ID and user ID"),Object(i.b)("li",{parentName:"ul"},"Resource groups are here to organize any type of resources (services, clusters, VMs…) that are managed by  Identity and Access Management (IAM)."),Object(i.b)("li",{parentName:"ul"},"Resource groups are not scoped by location"),Object(i.b)("li",{parentName:"ul"},"Access group are used to organize a set of users and service IDs into a single entity and easily assign permissions")),Object(i.b)("h2",null,"Create a Event Streams service instance"),Object(i.b)("p",null,"From the IBM Cloud Dashboard page, you can create a new resource, using the right top button ",Object(i.b)("inlineCode",{parentName:"p"},"Create resource"),"."),Object(i.b)("img",{src:"./images/ic-dashboard.png",alt:"D"}),Object(i.b)("p",null,"which leads to the service and feature catalog. From there in the ",Object(i.b)("inlineCode",{parentName:"p"},"services")," view, select the ",Object(i.b)("inlineCode",{parentName:"p"},"integration"),"\ncategory and then the ",Object(i.b)("inlineCode",{parentName:"p"},"Event Streams")," tile:"),Object(i.b)("img",{src:"./images/ic-catalog.png",alt:"C"}),Object(i.b)("p",null,"You can access this screen from this URL: ",Object(i.b)("a",{parentName:"p",href:"https://cloud.ibm.com/catalog/event-streams"},"https://cloud.ibm.com/catalog/event-streams"),"."),Object(i.b)("h3",null,"Plan characteristics"),Object(i.b)("p",null,"Within the first page for the Event Streams creation, you need to select the region, the pricing plan, a service name and the resource group."),Object(i.b)("img",{src:"./images/es-create-1.png",alt:"C2"}),Object(i.b)("p",null,"For the region, it is important to note that the ‘lite’ plan is available only in Dallas, and it used to do some proof of concept.\nIt is recommended to select a region close to your on-premise data center. For the Plan description,\nthe ",Object(i.b)("a",{parentName:"p",href:"https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-plan_choose"},"product documentation")," goes over the different plans in details."),Object(i.b)("p",null,"The ‘multi-tenancy’ means the Kafka cluster is shared with other people. The cluster topology is covering multi availability zones inside\nthe same data center. The following diagram illustrates a simple view of this topology with the different network zones and availability zones:"),Object(i.b)("img",{src:"./images/es-topology.png",alt:"T"}),Object(i.b)("p",null,"We will address fine-grained access control in ",Object(i.b)("a",{parentName:"p",href:"/refarch-eda/technology/event-streams/security/"},"the security lab"),"."),Object(i.b)("p",null,"As described in the ",Object(i.b)("a",{parentName:"p",href:"https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-apache_kafka"},"Kafka concept introduction"),", topic may have partitions.\nPartitions are used to improve throughput as consumer can run in parallel, and producer can publish to multiple partitions."),Object(i.b)("p",null,"The plan set a limit on the total number of partitions."),Object(i.b)("p",null,"Each partition records, are persisted in the file system and so the maximum time records are kept on disks is controlled by the maximum retention period and total size. Those Kafka configurations are described in the\n",Object(i.b)("a",{parentName:"p",href:"https://kafka.apache.org/documentation/#topicconfigs"},"topic and broker documentation"),"."),Object(i.b)("p",null,"Fro the Standard plan, the first page has also a price estimator. The two important concepts used for pricing are the number of  partition instances and the number of GB consumed: each consumer reading from a topic/partition will increase the number of byte consumed. The cost is per month."),Object(i.b)("h3",null,"Creating Event Streams instance with IBM Cloud CLI"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Go to IBM Cloud and click on the user avatar on the top right corner. Then, click on ",Object(i.b)("em",{parentName:"p"},"Log in to CLI and API")," option:"),Object(i.b)("img",{parentName:"li",src:"./images/1.png",alt:"1"})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Copy the ",Object(i.b)("inlineCode",{parentName:"p"},"IBM Cloud CLI")," login command"),Object(i.b)("img",{parentName:"li",src:"./images/2.png",alt:"2"})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Open a terminal window, paste and execute the command:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud login -a https://cloud.ibm.com -u passcode -p XsgEKGb84Z\nAPI endpoint: https://cloud.ibm.com\nAuthenticating...\nOK\n\nTargeted account bill s Account (b63...) <-> 195...\nSelect a region (or press enter to skip):\n1. au-syd\n2. in-che\n3. jp-osa\n4. jp-tok\n5. kr-seo\n6. eu-de\n7. eu-gb\n8. us-south\n9. us-south-test\n10. us-east\nEnter a number> 6\nTargeted region eu-de\n\nAPI endpoint:      https://cloud.ibm.com\nRegion:            eu-de\nUser:              A<>\nAccount:           Bill s Account (b63...) <-> 195...\nResource group:    No resource group targeted, use ibmcloud target -g RESOURCE_GROUP\nCF API endpoint:\nOrg:\nSpace:\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"List your services with ",Object(i.b)("inlineCode",{parentName:"p"},"ibmcloud resource service-instances")," and make sure your IBM Event Streams instance is listed:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud resource service-instances\nRetrieving instances with type service_instance in all resource groups in all locations under account Kedar Kulkarni's Account as ALMARAZJ@ie.ibm.com...\nOK\nName                                   Location   State    Type\nIBM Cloud Monitoring with Sysdig-rgd   us-south   active   service_instance\napikey for simple toolchain            us-east    active   service_instance\naapoc-event-streams                    us-south   active   service_instance\nEvent Streams-wn                       eu-de      active   service_instance\n")),Object(i.b)("p",{parentName:"li"},"We can see our instance called: ",Object(i.b)("strong",{parentName:"p"},"Event Streams-wn"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create an Event Streams instance using CLI"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"ibmcloud resource service-instance-create EventStreamsEDA2 messagehub standard us-south\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"List your IBM Event Streams instance details with ",Object(i.b)("inlineCode",{parentName:"p"},"ibmcloud resource service-instance <instance_name>"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud resource service-instance Event\\ Streams-wn\nRetrieving service instance Event Streams-wn in all resource groups under account Kedar Kulkarni's Account as ALMARAZJ@ie.ibm.com...\nOK\n\nName:                  Event Streams-wn\nID:                    crn:v1:bluemix:public:messagehub:eu-de:a/b636d1d8...cfa:b05be9...2e687a::\nGUID:                  b05be932...e687a\nLocation:              eu-de\nService Name:          messagehub\nService Plan Name:     enterprise-3nodes-2tb\nResource Group Name:\nState:                 active\nType:                  service_instance\nSub Type:\nCreated at:            2020-05-11T15:54:48Z\nCreated by:            bob.the.builder@someemail.com\nUpdated at:            2020-05-11T16:49:18Z\nLast Operation:\n                    Status    sync succeeded\n                    Message   Synchronized the instance\n")),Object(i.b)("p",{parentName:"li"},"Mind the ",Object(i.b)("inlineCode",{parentName:"p"},"\\")," character in your IBM Event Streams instance.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Initialize your IBM Event Streams plugin for the IBM Cloud CLI with ",Object(i.b)("inlineCode",{parentName:"p"},"ibmcloud es init"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es init\n\nSelect an Event Streams instance:\n1. Event Streams-2t\n2. Event Streams-wn\n3. aapoc-event-streams\n4. tutorial\nEnter a number> 2\nAPI Endpoint:   https://mh-tcqsppdpzlrkdmkb.....175-0000.eu-de.containers.appdomain.cloud\nOK\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Check all the CLI commands available to you to manage and interact with your IBM Event Streams instance with ",Object(i.b)("inlineCode",{parentName:"p"},"$ ibmcloud es"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es\nNAME:\nibmcloud es - Plugin for IBM Event Streams (build 1908221834)\n\nUSAGE:\nibmcloud es command [arguments...] [command options]\n\nCOMMANDS:\nbroker                 Display details of a broker.\nbroker-config          Display broker configuration.\ncluster                Display details of the cluster.\ngroup                  Display details of a consumer group.\ngroup-delete           Delete a consumer group.\ngroup-reset            Reset the offsets for a consumer group.\ngroups                 List the consumer groups.\ninit                   Initialize the IBM Event Streams plugin.\ntopic                  Display details of a topic.\ntopic-create           Create a new topic.\ntopic-delete           Delete a topic.\ntopic-delete-records   Delete records from a topic before a given offset.\ntopic-partitions-set   Set the partitions for a topic.\ntopic-update           Update the configuration for a topic.\ntopics                 List the topics.\nhelp, h                Show help\n\nEnter 'ibmcloud es help [command]' for more information about a command.\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"List your cluster configuration with ",Object(i.b)("inlineCode",{parentName:"p"},"$ ibmcloud es cluster"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es cluster\nDetails for cluster\nCluster ID                                                      Controller\nmh-tcqsppdpzlrkdmkbgmgl-4c20...361c6f175-0000   0\n\nDetails for brokers\nID   Host                                                                                                     Port   Rack\n0    kafka-0.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d......22e361c6f175-0000.eu-de.containers.appdomain.cloud   9093   fra05\n1    kafka-1.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d......22e361c6f175-0000.eu-de.containers.appdomain.cloud   9093   fra02\n2    kafka-2.mh-tcqsppdpzlrkdmkbgmgl-4c201a12d......22e361c6f175-0000.eu-de.containers.appdomain.cloud   9093   fra04\nNo cluster-wide dynamic configurations found.\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Looking at broker details: ",Object(i.b)("inlineCode",{parentName:"p"},"ibmcloud es broker  0"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"ibmcloud es broker  0\n    Details for broker\n    ID   Host                                                                        Port   Rack\n    0    broker-0-t19zgvnykgdqy1zl.kafka.svc02.us-south.eventstreams.cloud.ibm.com   9093   dal10\n\n    Details for broker configuration\n    Name                   Value                                                                                            Sensitive?\n    broker.id              0                                                                                                false\n    broker.rack            dal10                                                                                            false\n    advertised.listeners   SASL_EXTERNAL://broker-0-t19zgvnykgdqy1zl.kafka.svc02.us-south.eventstreams.cloud.ibm.com:9093   false\n    OK\n\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Get detail view of a broker configuration: ",Object(i.b)("inlineCode",{parentName:"p"},"ibmcloud es broker-config  0")))),Object(i.b)("p",null,"We will see other CLI commands in future labs."),Object(i.b)("h3",null,"Coming back another time"),Object(i.b)("p",null,"When coming back to the IBM Cloud dashboard the simplest way to find the Event Streams service is to go\nto the ",Object(i.b)("inlineCode",{parentName:"p"},"Services"),":"),Object(i.b)("img",{src:"./images/3.png",alt:"3"}),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Click on your IBM Event Streams instance:")),Object(i.b)("img",{src:"./images/4.png",alt:"4"}),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Click on ",Object(i.b)("em",{parentName:"li"},"Launch Dashboard")," button to open the IBM Event Streams dashboard")),Object(i.b)("img",{src:"./images/5.png",alt:"5"}),Object(i.b)("h3",null,"Main Event Streams Dashboard page"),Object(i.b)("p",null,"Once the instance is created, or when you come back to the service, you reach the ",Object(i.b)("inlineCode",{parentName:"p"},"manage"),"panel, as illustrated in previous figure."),Object(i.b)("p",null,"From the Dashboard we can access the ",Object(i.b)("em",{parentName:"p"},"Topics")," and ",Object(i.b)("em",{parentName:"p"},"Consumer groups")," panels."),Object(i.b)("img",{src:"./images/es-manage.png",alt:null}),Object(i.b)("h2",null,"Create topic"),Object(i.b)("p",null,"In this section we are going to see how to create, list and delete topics both using the User Interface and then the IBM Event Streams CLI."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Open the IBM Event Streams user interface (go into your IBM Event Streams service within your IBM Cloud portal and click on the launch dashboard button). Once there, click on the ",Object(i.b)("em",{parentName:"p"},"Topics")," tab from the top menu:"),Object(i.b)("img",{parentName:"li",src:"images/7.png",alt:"12-0"}))),Object(i.b)("p",null,"Let create a ",Object(i.b)("inlineCode",{parentName:"p"},"demo-topic-ui")," topic. If you need to revisit the topic concepts, you can read ",Object(i.b)("a",{parentName:"p",href:"http://localhost:8000/technology/kafka-overview/#topics"},"this note"),". When you go to the topics view you get the list of existing topics."),Object(i.b)("img",{src:"./images/es-topics.png",alt:null}),Object(i.b)("p",null,"From this list an administrator can delete an existing topic or create new one."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"The ‘create topic’ button leads to the step by step process."),Object(i.b)("li",{parentName:"ol"},"Switch to the ",Object(i.b)("em",{parentName:"li"},"Advanced")," mode to get access to the complete set of parameters. The first panel is here to define the core configuration")),Object(i.b)("img",{src:"./images/es-create-topic-1.png",alt:null}),Object(i.b)("p",null,"Some parameters to understand:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Number of partitions"),": the default value should be 1. If the data can be partitioned without loosing semantic, you can increase the number of partitions."),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Retention time"),": This is how long messages are retained before they are deleted to free up space. If your messages are not read\nby a consumer within this time, they will be missed. It is mapped to the ",Object(i.b)("a",{parentName:"li",href:"https://kafka.apache.org/documentation/#retention.ms"},"retention.ms")," kafka topic configuration.")),Object(i.b)("p",null,"The bottom part of the configuration page, includes ",Object(i.b)("em",{parentName:"p"},"logs, cleanup")," and ",Object(i.b)("em",{parentName:"p"},"indexing"),"."),Object(i.b)("img",{src:"./images/es-create-topic-2.png",alt:null}),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"The partition’s log parameter section includes a ",Object(i.b)("a",{parentName:"p",href:"https://kafka.apache.org/documentation/#cleanup.policy"},"cleanup policy")," that could be:"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"delete: discard old segments when their retention time or size limit has been reached"),Object(i.b)("li",{parentName:"ul"},"compact: retain at least the last known value for each message key within the log of data for a single topic partition. The topic looks like a table in DB."),Object(i.b)("li",{parentName:"ul"},"compact, delete: compact the log and remove old records"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"https://kafka.apache.org/documentation/#retention.bytes"},"retention bytes"),": represents the maximum size a partition (which consists of log segments) can grow to, before old log segments will be discarded to free up space.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"https://kafka.apache.org/documentation/#segment.bytes"},"log segment size")," is the maximum size in bytes of a single log file.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"https://kafka.apache.org/documentation/#segment.ms"},"Cleanup segment time - segment.ms")," controls the period of time after which Kafka will force the log to roll, even if the segment file isn’t full, this is to ensure that retention can delete or compact old data.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",{parentName:"p",href:"https://kafka.apache.org/documentation.html#segment.index.bytes"},"Index - segment.index.bytes"),"controls the size of the index that maps offsets to file positions."))),Object(i.b)("p",null,"The log cleaner policy is supported by a log cleaner, which are threads that recopy log segment files, removing records whose key appears in the head of the log."),Object(i.b)("p",null,"The number of replications is set to three with a ",Object(i.b)("inlineCode",{parentName:"p"},"min-in-sync")," replicas of two."),Object(i.b)(p,{kind:"info",mdxType:"InlineNotification"},"A message is considered committed when all in sync replicas for that partition have applied it to their log. The leader maintains a set of in-sync-replicas: all the nodes which are up-to-date with the leader’s log, and actively acknowledging new writes. Every write goes through the leader and is propagated to every node in the In Sync Replica set, or ISR."),Object(i.b)("img",{src:"./images/isr.png",alt:"142"}),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"We can now see our new topic:"),Object(i.b)("img",{parentName:"li",src:"./images/15.png",alt:"15"})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"To delete a topic, click on the topic options button at the right end of a topic, click on ",Object(i.b)("em",{parentName:"p"},"Delete this topic")," and then on the ",Object(i.b)("em",{parentName:"p"},"Delete")," button in the confirmation pop-up window:"),Object(i.b)("img",{parentName:"li",src:"./images/16.png",alt:"16"})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"The topic should now be deleted:"),Object(i.b)("img",{parentName:"li",src:"./images/7.png",alt:"16-1"}))),Object(i.b)("h3",null,"Create topic with CLI"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"List your topics with ",Object(i.b)("inlineCode",{parentName:"p"},"$ ibmcloud es topics"),":"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topics\nOK\nNo topics found.\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create a topic: (Default 1 partition - 3 replicas)"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topic-create --name demo-topic\nCreated topic demo-topic\nOK\n")),Object(i.b)("p",{parentName:"li"},"*"," Execute ",Object(i.b)("inlineCode",{parentName:"p"},"$ ibmcloud es topic-create --help")," for more further configuration of your topic creation")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"List topics:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topics\nTopic name\ndemo-topic\nOK\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Display details of a topic:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topic demo-topic\nDetails for topic demo-topic\nTopic name   Internal?   Partition count   Replication factor\ndemo-topic   false       1                 3\n\nPartition details for topic demo-topic\nPartition ID   Leader   Replicas   In-sync\n0              2        [2 1 0]    [2 1 0]\n\nConfiguration parameters for topic demo-topic\nName                  Value\ncleanup.policy        delete\nmin.insync.replicas   2\nsegment.bytes         536870912\nretention.ms          86400000\nretention.bytes       1073741824\nOK\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Delete records in a topic (in the command below, we want to delete record on a partition 0 offset 5 and partition 1 from offset 0):"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topic-delete-records --name demo-topic --partition-offset 1:0;0:5 --force\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Add partitions to an existing topic, by setting the new target number of partition:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topic-partition-set --name demo-topic --partitions 30\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Delete a topic:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topic-delete demo-topic\nReally delete topic 'demo-topic'? [y/N]> y\nTopic demo-topic deleted successfully\nOK\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"List topics:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-shell"},"$ ibmcloud es topics\nOK\nNo topics found.\n")))),Object(i.b)("p",null,"For the last list of commands see the ",Object(i.b)("a",{parentName:"p",href:"https://cloud.ibm.com/docs/EventStreams?topic=eventstreams-cli_reference#cli_reference"},"CLI Reference manual"),"."),Object(i.b)("h2",null,"Getting started applications"),Object(i.b)("p",null,"From the manage dashboard we can download a getting started application that has two processes: one consumer and one producer, or we can use a second application that we have in ",Object(i.b)("a",{parentName:"p",href:"https://github.com/ibm-cloud-architecture/refarch-eda-tools"},"this repository")),Object(i.b)("h3",null,"Using the Event Streams on cloud getting started app"),Object(i.b)("p",null,"To be able to build the code you need to get ",Object(i.b)("a",{parentName:"p",href:"https://gradle.org/install"},"gradle")," installed or use the docker image:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'docker run --rm -u gradle -v "$PWD":/home/gradle/project -w /home/gradle/project gradle gradle <gradle-task>\n')),Object(i.b)("p",null,"The instructions are in ",Object(i.b)("a",{parentName:"p",href:"https://cloud.ibm.com/docs/EventStreams?topic=EventStreams-getting_started#eventstreams"},"this documentation")," and can be summarized as:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Clone the github repository:")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/ibm-messaging/event-streams-samples.git\n")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Build the code:")),Object(i.b)("p",null,"Using the gradle CLI"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"cd kafka-java-console-sample\ngradle clean && gradle build\n")),Object(i.b)("p",null,"or the gradle docker image"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},'docker run --rm -u gradle -v "$PWD":/home/gradle/project -w /home/gradle/project gradle gradle build\n')),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Start consumer")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"java -jar ./build/libs/kafka-java-console-sample-2.0.jar broker-0-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-1-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-2-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093 am_rbb9e794mMwhE-KGPYo0hhW3h91e28OhT8IlruFe5 -consumer\n")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Start producer")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-shell"},"java -jar ./build/libs/kafka-java-console-sample-2.0.jar broker-0-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-1-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093,broker-2-qnprtqnp7hnkssdz.kafka.svc01.us-east.eventstreams.cloud.ibm.com:9093 am_rbb9e794mMwhE-KGPYo0hhW3h91e28OhT8IlruFe5 -producer\n")))}d.isMDXComponent=!0},I8xM:function(e,t,a){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},OIbQ:function(e,t,a){e.exports={bxTextTruncateEnd:"last-modified-date-module--bx--text-truncate--end--123zi",bxTextTruncateFront:"last-modified-date-module--bx--text-truncate--front--3xeKz",text:"last-modified-date-module--text--24m-4",row:"last-modified-date-module--row--2BquN"}},QH2O:function(e,t,a){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}}}]);
//# sourceMappingURL=component---src-pages-technology-event-streams-es-maas-es-cloud-mdx-dd54d0651686b853bfc3.js.map