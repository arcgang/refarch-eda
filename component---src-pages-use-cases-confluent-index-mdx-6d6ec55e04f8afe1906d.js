(window.webpackJsonp=window.webpackJsonp||[]).push([[97,73,123],{"/U13":function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return l})),a.d(t,"default",(function(){return b}));var n=a("wx14"),r=a("zLVn"),c=(a("q1tI"),a("7ljp")),o=a("013z"),l=(a("qKvR"),{}),i={_frontmatter:l},s=o.a;function b(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(c.b)(s,Object(n.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"In this scenario, we’re going to do a development deployment of Confluent platform using the Confluent for Kubernetes Operator.\nWe are using TLS encryption between each components, and configuring different listeners for authentication, and\nexpose the Kafka bootstrap server with OpenShift routes."),Object(c.b)("p",null,"To validate the deployment we will use two simple applications to produce and consume order messages."),Object(c.b)("p",null,"Confluent has worked on the development of new operator. The current product documentation can be found ",Object(c.b)("a",{parentName:"p",href:"https://docs.confluent.io/operator/current/overview.html"},"in Confluent for kubernetes"),".\nSome examples of cluster configuration are in ",Object(c.b)("a",{parentName:"p",href:"https://github.com/confluentinc/confluent-kubernetes-examples"},"the confluent-kubernetes-examples github repo"),"."),Object(c.b)("h2",null,"Prerequisites"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"OC CLI")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Helm CLI")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Helm 3 on OCP deployed")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Cluster administrator access to OCP Cluster")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Be sure clock synchronization is setup using Network Time Protocol between worker node (",Object(c.b)("inlineCode",{parentName:"p"},"ps -ef | grep ntpd"),").")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"You can clone the eda-lab-inventory repository"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"  git clone https://github.com/ibm-cloud-architecture/eda-lab-inventory\n")))),Object(c.b)("h2",null,"Assess platform sizing"),Object(c.b)("p",null,"For production deployment you can use the ",Object(c.b)("a",{parentName:"p",href:"https://eventsizer.io/"},"eventsizer website")," to assess the cluster sizing for VM,\nbare metal or Kubernetes deployment. The ",Object(c.b)("a",{parentName:"p",href:"https://docs.confluent.io/platform/current/installation/system-requirements.html#system-requirements"},"Confluent System requirements")," is also\ngiving guidelines for the different Confluent components in term of physical resources and supported OS."),Object(c.b)("p",null,"The important considerations for the broker are the disk, RAM and CPUs. Dedicating one to one k8s worker node to Kafka broker node is a safe decision."),Object(c.b)("h2",null,"Installing Confluent for Kubernetes operator"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Log in to the OpenShift cluster via the CLI first: ",Object(c.b)("inlineCode",{parentName:"p"},"oc login ..."))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Create a new project/namespace to encapsulate the Confluent for Kubernetes resources."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"oc new-project confluent\n")))),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"If you change this project name then you need to update the yaml file to define the plaform (See ",Object(c.b)("a",{parentName:"p",href:"https://raw.githubusercontent.com/ibm-cloud-architecture/eda-lab-inventory/master/environments/confluent/platform.yaml"},"this example file"),").")),Object(c.b)("ol",{start:3},Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Add the necessary Confluent for Kubernetes ",Object(c.b)("strong",{parentName:"p"},"Helm")," repository artifacts and update."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"helm repo add confluentinc https://packages.confluent.io/helm\nhelm repo update\n"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Install the Operator."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"helm upgrade --install confluent-operator confluentinc/confluent-for-kubernetes\n"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"You can wait for the status with the following command"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc wait deployment confluent-operator --for=condition=Available\n"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"Authorize service account to get privileged security context"),Object(c.b)("p",{parentName:"li"}," ",Object(c.b)("strong",{parentName:"p"},"Note")," - You should see an error with insufficient security context and that your deployment cannot create a pod. The reason for this is because the associated service account does not have the sufficient permissions to create the pod. Run the following command to get a list of the Service Accounts in the current namespace."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc get sa\n\nNAME                       SECRETS   AGE\nbuilder                    2         4m11s\nconfluent-for-kubernetes   2         3m4s\ndefault                    2         4m11s\ndeployer                   2         4m11s\npipeline                   2         4m11s\n")),Object(c.b)("p",{parentName:"li"},"As you can see there’s the ",Object(c.b)("inlineCode",{parentName:"p"},"confluent-for-kubernetes")," service account that was automatically created. Run the following command to give that service account the sufficient constraints."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"oc adm policy add-scc-to-user privileged -z confluent-for-kubernetes\n")),Object(c.b)("p",{parentName:"li"}," ",Object(c.b)("strong",{parentName:"p"},"Note")," - Instead of adding the ",Object(c.b)("inlineCode",{parentName:"p"},"privileged")," security context constraint to the ",Object(c.b)("inlineCode",{parentName:"p"},"confluent-for-kubernetes")," service account, you may fancy to change the UID (1001) in the Confluent for Kubernetes operator ",Object(c.b)("inlineCode",{parentName:"p"},"values.yaml")," files instead and applying those custom helm charts.")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"You might need to start a new rollout manually."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc rollout latest deployment confluent-operator\n")))),Object(c.b)("h2",null,"Deploying Confluent Platform"),Object(c.b)("h3",null,"Security settings"),Object(c.b)("p",null,"We’re going to be exposing the Kafka service using OpenShift routes which requires TLS configurations for Confluent Platform."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"First of all, we will need to update the ",Object(c.b)("inlineCode",{parentName:"p"},"default")," Service Account so that the resources can be brought up."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc adm policy add-scc-to-user privileged -z default\n")))),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"Note")," Similar to deploying the Confluent for Kubernetes operator, instead of adding the ",Object(c.b)("inlineCode",{parentName:"p"},"privileged")," security context constraint to the ",Object(c.b)("inlineCode",{parentName:"p"},"default"),"\nservice account, you may fancy to change the UID (1001) required in the helm chart yaml files instead and applying those.")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"In the root of ",Object(c.b)("a",{parentName:"li",href:"https://github.com/ibm-cloud-architecture/eda-lab-inventory"},"one of our lab repository")," is a folder named ",Object(c.b)("inlineCode",{parentName:"li"},"environment/confluent/certs/"),".\nWe have defined some sample configurations to use to\ngenerate our Certificate Authority (CA) keys. ")),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"IMPORTANT")," - If using another namespace name, the ",Object(c.b)("inlineCode",{parentName:"p"},"certs/server-domain.json")," file may need to be modified. ")),Object(c.b)("p",null,"You can replace the ",Object(c.b)("inlineCode",{parentName:"p"},"confluent")," value with the project/namespace that you have your Confluent for Kubernetes resources located in.\nBelow is an example of "),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-shell"},"    *.confluent.svc.cluster.local,\n    *.zookeeper.confluent.svc.cluster.local,\n    *.kafka.confluent.svc.cluster.local\n")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"We will need the ",Object(c.b)("a",{parentName:"p",href:"https://github.com/cloudflare/cfssl"},"cfssl")," CLI tool to sign, verify and bundle TLS certificates. On MacOS you can use brew to install it."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"brew install cfssl\n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"We’ll create a new folder ",Object(c.b)("inlineCode",{parentName:"p"},"certs/generated/")," to keep the CA generated files."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"   # under environments/confluent\n   mkdir ./certs/generated\n   cfssl gencert -initca ./certs/ca-csr.json | cfssljson -bare ./certs/generated/ca -\n")),Object(c.b)("p",{parentName:"li"}," this should creates the following files:"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"  ├── generated\n  │   ├── ca-key.pem\n  │   ├── ca.csr\n  │   └── ca.pem\n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"We can validate the CA file with the following."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"   openssl x509 -in ./certs/generated/ca.pem -text -noout\n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Now to create server certificates with the appropriate SANs (SANs listed in server-domain.json) we do:"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"   cfssl gencert -ca=./certs/generated/ca.pem \\\n   -ca-key=./certs/generated/ca-key.pem \\\n   -config=./certs/ca-config.json \\\n   -profile=server ./certs/server-domain.json | cfssljson -bare ./certs/generated/server \n")),Object(c.b)("p",{parentName:"li"},"  This should add:"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"  ├── generated\n  |  ├── server-key.pem\n  |  ├── server.csr\n  |  └── server.pem \n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Again, we can validate the server certificate and SANs"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"   openssl x509 -in ./certs/generated/server.pem -text -noout\n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"We’re going to create eight OpenShift secrets which will all use the same CA files for the sake of simplicity. In production we may is differnet certificate\nfor each component. They will all be named differently as the TLS configurations within the various Custom Resources expect different TLS secrets. "),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"   oc create secret generic generic-tls \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem &&\n   oc create secret generic kafka-tls-internal \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem &&\n   oc create secret generic kafka-tls-external \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem && \n   oc create secret generic zk-tls \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem && \n   oc create secret generic connect-tls \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem &&\n   oc create secret generic ksqldb-tls \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem &&\n   oc create secret generic controlcenter-tls \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem &&\n   oc create secret generic schemaregistry-tls \\\n   --from-file=fullchain.pem=./certs/generated/server.pem \\\n   --from-file=cacerts.pem=./certs/generated/ca.pem \\\n   --from-file=privkey.pem=./certs/generated/server-key.pem \n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"We need to create another secret for the internal Kafka listener so that the other Confluent Platform resources can connect to the Kafka cluster\nover PLAINTEXT."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-sh"},"oc create secret generic internal-plain-credential \\\n--from-file=plain-users.json=./certs/creds-kafka-sasl-users.json \\\n--from-file=plain.txt=./certs/creds-client-kafka-sasl-user.txt\n")))),Object(c.b)("h3",null,"Deploy the platform components form one descriptor"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Get the Openshift ingress subdomain name: "),Object(c.b)("span",{parentName:"li",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(c.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"47.56944444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABjklEQVQoz21SXW+cMBDk//+iREnbtzap0jZK3yIlJ12BgwvmwAZ/w3TXHCSRztLIHuMdz6zJdrsdyrJEVVVo2xbDMCQ0osHxWG+873vUdQ0pJZRSCczXGuZCCGSCFtYY9MMIHyLWYZwj+I3HGGF82DjmOX2faF6Ho5pMkiDfIKWCIWEunOlQJPEQQlozpmmC937jjEBneJ/BnOuz4SyYYlEcbTToM91mKYYkB1NCpCI1GNoPn1zPHxxaa5Gps+CoBnj9HnGp+Ey1jXAUe3W1gp0aN0Frs0S22uK5esG33XfcHR7xo/hDeMTP6imB9/42z+R7iRrPQmnmdpBJhlkd6lHj7a3Gvn5F0ZcoThVycUAzthC6Q6NP6Izkl8ClMcfA+elx9YfI9MrOuKXmUh3Fevpyjbuba/z6eosHwv3NFV5+P2A8FNDFHrou3wWTU61To0Oc0szYekUuujKHyPdoizxB5P+gjhV83yH0Jxiak+BIgp3UUOPScP7HnI+QxFl85pemJikzw08XIp9hrcN/3VwE3uU4YWgAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(c.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Ingress Subdomain",title:"Ingress Subdomain",src:"/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/3cbba/cluster-subdomain.png",srcSet:["/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/7fc1e/cluster-subdomain.png 288w","/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/a5df1/cluster-subdomain.png 576w","/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/3cbba/cluster-subdomain.png 1152w","/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/0b124/cluster-subdomain.png 1728w","/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/4ea69/cluster-subdomain.png 2304w","/refarch-eda/static/9a4468c1b7a180da11b04850fbe43131/90941/cluster-subdomain.png 3746w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(c.b)("p",{parentName:"li"},"and update the ",Object(c.b)("inlineCode",{parentName:"p"},"environments/confluent/platform.yaml")," file to reflect this domain for the route elements:"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-yaml"}," apiVersion: platform.confluent.io/v1beta1\n kind: Kafka \n spec:\n   listeners: \n       external:\n           externalAccess:\n               type: route\n               route:\n                   domain: <tochange>.....\n\n # control center\n apiVersion: platform.confluent.io/v1beta1\n kind: ControlCenter\n spec:\n   externalAccess:\n       type: route\n       route:\n           domain: <tochange>.\n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Apply the minimum custom resources to get 3 zookeepers, 3 Kafka Broker, 1 Kafka connector, ksqlDB, ControlCenter and schema registry:"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc apply -f environments/confluent/platform.yaml\n")))),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"Note")," - If you created a namespace with a name other than ",Object(c.b)("inlineCode",{parentName:"p"},"confluent")," you will need to create a local yaml file and you can either remove ",Object(c.b)("inlineCode",{parentName:"p"},"metadata.namespace: confluent"),"\nin each of the Custom Resource YAMLs and apply that file in your created namespace or edit ",Object(c.b)("inlineCode",{parentName:"p"},"metadata.namespace: ")," value to your created one.\nYou can also customize the settings in these YAMLs as you see fit.\nIn the ",Object(c.b)("a",{parentName:"p",href:"https://github.com/ibm-cloud-architecture/eda-lab-inventory"},"eda-lab-inventory repository")," you will find ",Object(c.b)("a",{parentName:"p",href:"https://github.com/ibm-cloud-architecture/eda-lab-inventory/tree/master/environments/confluent/platform.yaml"},"such a file"),".")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Now wait a few minutes for all the resources to come up."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc get pods -w\n\nNAME                                  READY   STATUS    RESTARTS   AGE\nconfluent-operator-5b4fb58d99-vbnsn   1/1     Running   0          29m\nconnect-0                             1/1     Running   2          5m44s\ncontrolcenter-0                       0/1     Pending   0          108s\nkafka-0                               1/1     Running   0          4m9s\nkafka-1                               1/1     Running   0          4m9s\nkafka-2                               1/1     Running   0          4m9s\nksqldb-0                              0/1     Pending   0          109s\nschemaregistry-0                      1/1     Running   0          109s\nzookeeper-0                           1/1     Running   0          5m44s\nzookeeper-1                           1/1     Running   0          5m44s\nzookeeper-2                           1/1     Running   0          5m44s\n"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Once everything is ready you can test by port-forwarding to ",Object(c.b)("inlineCode",{parentName:"p"},"controlcenter-0")," pod."),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc port-forward controlcenter-0 9021:9021\n")),Object(c.b)("p",{parentName:"li"},"  Forwarding from 127.0.0.1:9021 -> 9021\nForwarding from ","[::1]",":9021 -> 9021\nHandling connection for 9021")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"In your browser go to ",Object(c.b)("inlineCode",{parentName:"p"},"localhost:9021"),"."),Object(c.b)("p",{parentName:"li"},"  ",Object(c.b)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(c.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"68.75%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGklEQVQ4y6VSS07DMBT0UUBIcAJYsSjXgBUSPRxLTsANkCpUAQtWtEqcxGnTRkn8HeykSShUrRtGGj3HcebN84Scjx5wcTPG2fU9Tq/ucHJ5+y+St/dPTF4/8BXEmDtShnnImnWQYGbrMSTxagWaJOggJGA0hoI8ziimbAGR56jsBn16RvwyRS458vUaSilobSy1F8nPB2NMV4eSSCkhhKjp1o3434PeIyulUZQliqJEuam92206HHQobAhBQBGGFFEUg9KoFmzQO3ONfZzWglmWbW3u6uwE23d7BTkXSOxv49JsP3ZNfo/oLSilqh26QFpUFbf3WQ0VlGCMIU1TcM69Rt4fykZwuVx0YfSh4PhQpL07N/Yh+jr8BlWxH7g4nS8yAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(c.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Confluent Control Center",title:"Confluent Control Center",src:"/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/3cbba/confluent-control-center.png",srcSet:["/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/7fc1e/confluent-control-center.png 288w","/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/a5df1/confluent-control-center.png 576w","/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/3cbba/confluent-control-center.png 1152w","/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/0b124/confluent-control-center.png 1728w","/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/4ea69/confluent-control-center.png 2304w","/refarch-eda/static/155713486a15e30b60c3f3e0a6eb585c/32cd8/confluent-control-center.png 2868w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    ")))),Object(c.b)("h2",null,"Add topics"),Object(c.b)("p",null,"Create the ",Object(c.b)("inlineCode",{parentName:"p"},"KafkaTopic")," custom resource named ",Object(c.b)("inlineCode",{parentName:"p"},"orders"),"."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-sh"},'cat << EOF | oc apply -f -\napiVersion: platform.confluent.io/v1beta1\nkind: KafkaTopic\nmetadata:\n name: orders\n namespace: confluent\nspec:\n replicas: 3\n partitionCount: 1\n configs:\n   cleanup.policy: "delete"\nEOF\n\n')),Object(c.b)("h2",null,"Validate deployment by access control center user interface"),Object(c.b)("p",null,"Once everything is up and running you can verify the Control center using a port forward like before."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-shell"},"oc port-forward control-center-0 9021:9021\n")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Go to ",Object(c.b)("inlineCode",{parentName:"li"},"https://localhost:9021"),". The ",Object(c.b)("inlineCode",{parentName:"li"},"https")," is important unlike previously as it’s now secured.")),Object(c.b)("p",null,"You can also view the Control Center UI from the enabled route which will be in the form of something like the following\n",Object(c.b)("inlineCode",{parentName:"p"},"cc-route......containers.appdomain.cloud")))}b.isMDXComponent=!0},"013z":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("NmYn"),o=a.n(c),l=a("Wbzz"),i=a("Xrax"),s=a("k4MR"),b=a("TSYQ"),p=a.n(b),m=a("QH2O"),u=a.n(m),d=a("qKvR"),f=function(e){var t,a=e.title,n=e.theme,r=e.tabs,c=void 0===r?[]:r;return Object(d.b)("div",{className:p()(u.a.pageHeader,(t={},t[u.a.withTabs]=c.length,t[u.a.darkMode]="dark"===n,t))},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12"},Object(d.b)("h1",{id:"page-title",className:u.a.text},a)))))},g=a("BAC9"),h=function(e){var t=e.relativePagePath,a=e.repository,n=Object(l.useStaticQuery)("1364590287").site.siteMetadata.repository,r=a||n,c=r.baseUrl,o=r.subDirectory,i=c+"/edit/"+r.branch+o+"/src/pages"+t;return c?Object(d.b)("div",{className:"bx--row "+g.row},Object(d.b)("div",{className:"bx--col"},Object(d.b)("a",{className:g.link,href:i},"Edit this page on GitHub"))):null},O=a("FCXl"),j=a("dI71"),N=a("I8xM"),y=function(e){function t(){return e.apply(this,arguments)||this}return Object(j.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,r=n.split("/").filter(Boolean).slice(-1)[0],c=a.map((function(e){var t,a=o()(e,{lower:!0,strict:!0}),c=a===r,i=new RegExp(r+"/?(#.*)?$"),s=n.replace(i,a);return Object(d.b)("li",{key:e,className:p()((t={},t[N.selectedItem]=c,t),N.listItem)},Object(d.b)(l.Link,{className:N.link,to:""+s},e))}));return Object(d.b)("div",{className:N.tabsContainer},Object(d.b)("div",{className:"bx--grid"},Object(d.b)("div",{className:"bx--row"},Object(d.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(d.b)("nav",{"aria-label":t},Object(d.b)("ul",{className:N.list},c))))))},t}(r.a.Component),v=a("MjG9"),k=a("CzIb"),w=a("Asxa"),A=a("OIbQ"),x=a.n(A),C=function(e){var t=e.date,a=new Date(t);return t?Object(d.b)(w.c,{className:x.a.row},Object(d.b)(w.a,null,Object(d.b)("div",{className:x.a.text},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null};t.a=function(e){var t=e.pageContext,a=e.children,n=e.location,r=e.Title,c=t.frontmatter,b=void 0===c?{}:c,p=t.relativePagePath,m=t.titleType,u=b.tabs,g=b.title,j=b.theme,N=b.description,w=b.keywords,A=b.date,x=Object(k.a)().interiorTheme,T=Object(l.useStaticQuery)("2456312558").site.pathPrefix,S=T?n.pathname.replace(T,""):n.pathname,I=u?S.split("/").filter(Boolean).slice(-1)[0]||o()(u[0],{lower:!0}):"",P=j||x;return Object(d.b)(s.a,{tabs:u,homepage:!1,theme:P,pageTitle:g,pageDescription:N,pageKeywords:w,titleType:m},Object(d.b)(f,{title:r?Object(d.b)(r,null):g,label:"label",tabs:u,theme:P}),u&&Object(d.b)(y,{title:g,slug:S,tabs:u,currentTab:I}),Object(d.b)(v.a,{padded:!0},a,Object(d.b)(h,{relativePagePath:p}),Object(d.b)(C,{date:A})),Object(d.b)(O.a,{pageContext:t,location:n,slug:S,tabs:u,currentTab:I}),Object(d.b)(i.a,null))}},BAC9:function(e,t,a){e.exports={bxTextTruncateEnd:"EditLink-module--bx--text-truncate--end--2pqje",bxTextTruncateFront:"EditLink-module--bx--text-truncate--front--3_lIE",link:"EditLink-module--link--1qzW3",row:"EditLink-module--row--1B9Gk"}},I8xM:function(e,t,a){e.exports={bxTextTruncateEnd:"PageTabs-module--bx--text-truncate--end--267NA",bxTextTruncateFront:"PageTabs-module--bx--text-truncate--front--3xEQF",tabsContainer:"PageTabs-module--tabs-container--8N4k0",list:"PageTabs-module--list--3eFQc",listItem:"PageTabs-module--list-item--nUmtD",link:"PageTabs-module--link--1mDJ1",selectedItem:"PageTabs-module--selected-item--YPVr3"}},OIbQ:function(e,t,a){e.exports={bxTextTruncateEnd:"last-modified-date-module--bx--text-truncate--end--123zi",bxTextTruncateFront:"last-modified-date-module--bx--text-truncate--front--3xeKz",text:"last-modified-date-module--text--24m-4",row:"last-modified-date-module--row--2BquN"}},QH2O:function(e,t,a){e.exports={bxTextTruncateEnd:"PageHeader-module--bx--text-truncate--end--mZWeX",bxTextTruncateFront:"PageHeader-module--bx--text-truncate--front--3zvrI",pageHeader:"PageHeader-module--page-header--3hIan",darkMode:"PageHeader-module--dark-mode--hBrwL",withTabs:"PageHeader-module--with-tabs--3nKxA",text:"PageHeader-module--text--o9LFq"}}}]);
//# sourceMappingURL=component---src-pages-use-cases-confluent-index-mdx-6d6ec55e04f8afe1906d.js.map